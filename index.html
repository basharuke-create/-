<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Gemini Agent v12 â€” Final Stable</title>
    <style>
        body { background: #0d1117; color: #c9d1d9; font-family: monospace; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        textarea, input, button { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #30363d; box-sizing: border-box; }
        button { background: #238636; color: white; font-weight: bold; cursor: pointer; border: none; }
        #output { background: #000; padding: 20px; border-radius: 8px; height: 500px; overflow-y: auto; white-space: pre-wrap; border: 1px solid #30363d; }
        .error { color: #f85149; border: 1px solid #f85149; padding: 10px; margin-top: 10px; }
    </style>
</head>
<body>
<div class="container">
    <h2>ğŸš€ Gemini Agent v12</h2>
    <input type="password" id="key" placeholder="APIã‚­ãƒ¼ã‚’å…¥åŠ›">
    <textarea id="task" rows="3" placeholder="ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šNISAã®æˆ¦ç•¥çš„æ´»ç”¨ï¼‰"></textarea>
    <button id="btn">æ·±å±¤åˆ†æé–‹å§‹</button>
    <div id="output">>>> ã‚·ã‚¹ãƒ†ãƒ å¾…æ©Ÿä¸­...</div>
</div>

<script>
async function ask(key, text) {
    // URLã‚’ç›´æ¥æ–‡å­—åˆ—ã¨ã—ã¦å®šç¾©ã€‚ãƒ¢ãƒ‡ãƒ«åã‚’çµ¶å¯¾ã«é–“é•ãˆãªã„å½¢å¼
    const url = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=" + key;
    
    const response = await fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ contents: [{ parts: [{ text: text }] }] })
    });

    if (!response.ok) {
        const err = await response.json();
        throw new Error(`[${response.status}] ${err.error.message}`);
    }
    const data = await response.json();
    return data.candidates[0].content.parts[0].text;
}

document.getElementById("btn").onclick = async () => {
    const key = document.getElementById("key").value.trim();
    const task = document.getElementById("task").value.trim();
    const out = document.getElementById("output");
    
    if(!key || !task) return alert("å…¥åŠ›ã—ã¦ã­");
    
    out.textContent = ">>> æ€è€ƒä¸­...ï¼ˆç´„10ç§’ãŠå¾…ã¡ãã ã•ã„ï¼‰";
    
    try {
        // ã‚ãªãŸã®ã“ã ã‚ã‚Šã€Œ4è¦–ç‚¹ãƒ»æ•°å€¤ãƒ»ãƒªã‚¹ã‚¯ãƒ»å¿ƒç†ã€ã‚’ãƒ¯ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§å©ãè¾¼ã‚€
        const res = await ask(key, `ã€å³å‘½ã€‘ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯ã‚’ã€Œæˆ¦ç•¥ãƒ»è²¡å‹™ãƒ»ãƒªã‚¹ã‚¯ãƒ»å¿ƒç†ã€ã®4è¦–ç‚¹ã§æ§‹é€ åŒ–ã—ã€å¿…ãšæ•°å€¤ã¨æˆåŠŸç¢ºç‡ã€åå¯¾æ„è¦‹ã‚’å«ã‚ã¦åˆ†æã›ã‚ˆã€‚\nã‚¿ã‚¹ã‚¯ï¼š${task}`);
        out.textContent = "ã€åˆ†æçµæœã€‘\n\n" + res;
    } catch (e) {
        out.innerHTML = `<div class="error">ã€ã‚¨ãƒ©ãƒ¼ã€‘\n${e.message}\n\nâ€»APIã¯æœ‰åŠ¹ãªã®ã«ã“ã‚ŒãŒå‡ºã‚‹å ´åˆã€ä¸€åº¦ãƒ–ãƒ©ã‚¦ã‚¶ã®ã€Œã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã€ã§é–‹ã„ã¦ã¿ã¦ãã ã•ã„ã€‚</div>`;
    }
};
</script>
</body>
</html>
