<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Strategic Agent v14 â€” Final</title>
    <style>
        body { background: #0d1117; color: #c9d1d9; font-family: monospace; padding: 20px; }
        .box { border: 1px solid #30363d; padding: 15px; border-radius: 8px; background: #161b22; }
        input, textarea, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 4px; border: 1px solid #30363d; box-sizing: border-box; font-size: 16px; }
        button { background: #238636; color: white; border: none; font-weight: bold; cursor: pointer; }
        #log { background: #000; padding: 15px; height: 450px; overflow-y: auto; white-space: pre-wrap; border: 1px solid #30363d; color: #79c0ff; }
        .err { color: #f85149; }
    </style>
</head>
<body>
    <div class="box">
        <h3>ğŸš€ v14: æ·±å±¤åˆ†æã‚¨ãƒ³ã‚¸ãƒ³</h3>
        <input type="password" id="key" placeholder="APIã‚­ãƒ¼ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘">
        <textarea id="task" rows="3" placeholder="ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šä»Šå¾Œã®NISAæˆ¦ç•¥ï¼‰"></textarea>
        <button id="go">åˆ†æå®Ÿè¡Œ (ç„¡æ–™æ )</button>
        <div id="log">>>> ã‚¹ã‚¿ãƒ³ãƒã‚¤</div>
    </div>

<script>
const log = document.getElementById('log');
const print = (t, c) => { const s = document.createElement('div'); if(c) s.className=c; s.textContent=t; log.appendChild(s); log.scrollTop=log.scrollHeight; };

document.getElementById('go').onclick = async () => {
    const k = document.getElementById('key').value.trim();
    const t = document.getElementById('task').value.trim();
    if(!k || !t) return alert("å…¥åŠ›ã—ã¦ï¼");

    log.textContent = ">>> [é€šä¿¡é–‹å§‹] Google API v1 å®‰å®šç‰ˆã¸æ¥ç¶š...\n";

    try {
        // â˜…ä¿®æ­£: æœ€ã‚‚æˆåŠŸç¢ºç‡ã®é«˜ã„ v1 (å®‰å®šç‰ˆ) ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç›´æ¥å©ã
        const url = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${k}`;
        
        const response = await fetch(url, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                contents: [{ parts: [{ text: `ã€åˆ†æå‘½ä»¤ã€‘ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯ã‚’ã€Œæˆ¦ç•¥ãƒ»è²¡å‹™ãƒ»ãƒªã‚¹ã‚¯ãƒ»å¿ƒç†ã€ã®4è¦–ç‚¹ã§ã€æ•°å€¤ã¨æˆåŠŸç¢ºç‡ã€åè¨¼ã‚’å«ã‚ã¦æ§‹é€ åŒ–ã—ã¦ç­”ãˆã‚ˆã€‚\nã‚¿ã‚¹ã‚¯ï¼š${t}` }] }]
            })
        });

        if (!response.ok) {
            const errorBody = await response.json();
            throw new Error(errorBody.error.message);
        }

        const data = await response.json();
        const resText = data.candidates[0].content.parts[0].text;
        
        print("\n=== ã€åˆ†æå®Œäº†ã€‘ ===\n", "ok");
        print(resText);

    } catch (e) {
        print(`\nâŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ: ${e.message}`, "err");
        print("\nã€å¯¾ç­–ã€‘ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã‚‹å ´åˆã¯ã€APIã‚­ãƒ¼ä½œæˆæ™‚ã«ã€ŒCreate API key in new projectã€ã‚’ã€Œã‚‚ã†ä¸€åº¦ã€è¡Œã„ã€ãã®æ–°ã—ã„ã‚­ãƒ¼ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚");
    }
};
</script>
</body>
</html>
